{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Desktop/React/website-monitoring/src/components/Main/Table/Tablebody.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport Form from '../UserForm/Form';\nimport { Pagination } from 'antd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { additemInitiate, getitemsInitiate, deleteitemInitiate, edititemInitiate, updateitemInitiate, deleteitemAllInitiate, copyitemInitiate, editedmodeinitialzer } from '../../../Actions/action';\nimport { addlogInitiate, actionlogInitiate, editlogInitiate } from '../../../Actions/logging';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst TableBody = props => {\n  _s();\n\n  const {\n    website,\n    searchdata,\n    hide\n  } = useSelector(state => state.data);\n  const {\n    role\n  } = useSelector(state => state.user); // pagination\n\n  const total = searchdata.length;\n  const [page, setPage] = useState(1);\n  const [postPerPage, setPostPerPage] = useState(10);\n  const indexofLastPage = page * postPerPage;\n  const indexofFirstPage = indexofLastPage - postPerPage;\n  const CurrentPosts = searchdata.slice(indexofFirstPage, indexofLastPage);\n\n  const onShowSizeChange = (current, pageSize) => {\n    setPostPerPage(pageSize);\n  };\n\n  const itemRender = (current, type, orginialElement) => {\n    if (type === 'prev') {\n      return /*#__PURE__*/_jsxDEV(\"a\", {\n        children: \"Previous\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 20\n      }, this);\n    }\n\n    if (type === 'next') {\n      return /*#__PURE__*/_jsxDEV(\"a\", {\n        children: \"Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 20\n      }, this);\n    }\n\n    return orginialElement;\n  }; // end pagination\n\n\n  const [websiteid, setwebsiteid] = useState(null);\n  const [radio, setradio] = useState([]);\n  const [editmode, seteditmode] = useState(false);\n  const dispatch = useDispatch();\n  const initialstate = {\n    code: '',\n    domain: '',\n    cpanel: '',\n    username: '',\n    password: '',\n    owner: '',\n    domainExpireDate: '',\n    hostingExpireDate: '',\n    sslExpireDate: ''\n  };\n  const [input, setinput] = useState(initialstate);\n  const datas = {\n    user: role && role.mail,\n    userid: role && role.uid,\n    actiontype: 'added',\n    code: input.code,\n    time: new Date()\n  };\n\n  const onchangehandler = event => {\n    setinput({ ...input,\n      [event.target.id]: event.target.value\n    });\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n\n    if (!editmode) {\n      dispatch(additemInitiate(input));\n      setinput({\n        code: '',\n        domain: '',\n        cpanel: '',\n        username: '',\n        password: '',\n        owner: '',\n        domainExpireDate: '',\n        hostingExpireDate: '',\n        sslExpireDate: ''\n      });\n      dispatch(addlogInitiate(datas));\n    } else {\n      const editlogdata = { ...(website.owner !== input.owner && {\n          owner: {\n            newowner: input.owner,\n            oldowner: website.owner\n          }\n        }),\n        ...(website.code !== input.code && {\n          code: {\n            newcode: input.code,\n            oldcode: website.code\n          }\n        }),\n        ...(website.domain !== input.domain && {\n          domain: {\n            newdomain: input.domain,\n            olddomain: website.domain\n          }\n        }),\n        ...(website.cpanel !== input.cpanel && {\n          cpanel: {\n            newcpanel: input.cpanel,\n            oldcpanel: website.cpanel\n          }\n        }),\n        ...(website.domainExpireDate !== input.domainExpireDate && {\n          domainExpireDate: {\n            newdomainExpireDate: input.domainExpireDate,\n            olddomainExpireDate: website.domainExpireDate\n          }\n        }),\n        ...(website.hostingExpireDate !== input.hostingExpireDate && {\n          hostingExpireDate: {\n            newhostingExpireDate: input.hostingExpireDate,\n            oldhostingExpireDate: website.hostingExpireDate\n          }\n        }),\n        ...(website.sslExpireDate !== input.sslExpireDate && {\n          sslExpireDate: {\n            newsslExpireDate: input.sslExpireDate,\n            oldsslExpireDate: website.sslExpireDate\n          }\n        }),\n        actiontype: 'Edited',\n        user: role && role.mail\n      };\n      dispatch(updateitemInitiate(websiteid, input));\n      dispatch(actionlogInitiate({\n        code: input.code,\n        user: role && role.mail,\n        actiontype: 'edited',\n        time: new Date()\n      }));\n      setwebsiteid(null);\n      editedmodeinitialzer(false);\n      setinput({\n        code: '',\n        domain: '',\n        cpanel: '',\n        username: '',\n        password: '',\n        owner: '',\n        omainExpireDate: '',\n        hostingExpireDate: '',\n        sslExpireDate: ''\n      });\n    }\n  };\n\n  const deletehandler = item => {\n    if (window.confirm('are you sure?')) {\n      dispatch(deleteitemInitiate(item.id));\n      dispatch(actionlogInitiate({\n        code: item.code,\n        user: role && role.mail,\n        actiontype: 'deleted',\n        time: new Date()\n      }));\n    }\n  };\n\n  const edithandler = id => {\n    dispatch(edititemInitiate(id));\n    seteditmode(true);\n    setwebsiteid(id);\n  };\n\n  const copyhandler = copieditemdata => {\n    dispatch(copyitemInitiate(copieditemdata));\n    dispatch(actionlogInitiate({\n      code: copieditemdata.code,\n      user: role && role.mail,\n      actiontype: 'copied',\n      time: new Date()\n    }));\n  };\n\n  const deleteallhandler = id => {\n    setradio([...radio, id]);\n  };\n\n  const deleteall = radio => {\n    dispatch(deleteitemAllInitiate(radio));\n  };\n\n  useEffect(() => {\n    dispatch(getitemsInitiate());\n  }, []);\n  useEffect(() => {\n    if (website) {\n      setinput({ ...website\n      });\n    }\n  }, [website]);\n\n  const askpermision = () => {\n    alert(\"You can't do any action, Please ask admin permission\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [role && role.role === 'admin' ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => deleteall(radio),\n      children: \"Del All\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => askpermision(),\n      children: \"Del All\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }, this), CurrentPosts && CurrentPosts.map(item => {\n      return /*#__PURE__*/_jsxDEV(Head, {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          value: \"\",\n          name: \"\",\n          onClick: () => deleteallhandler(item.id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '7.5%'\n          },\n          children: item.code\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '20%'\n          },\n          children: item.domain\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '20%'\n          },\n          children: item.cpanel\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '12.5%'\n          },\n          children: item.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '12.5%'\n          },\n          children: item.password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '10%'\n          },\n          children: item.owner\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 29\n        }, this), role && role.role === 'admin' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => deletehandler(item),\n            children: \"Del\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => copyhandler(item),\n            children: \"Copy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => edithandler(item.id),\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => askpermision(),\n            children: \"Del\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => askpermision(),\n            children: \"Copy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => askpermision(),\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }, this);\n    }), hide || editmode ? /*#__PURE__*/_jsxDEV(Form, {\n      onchangehandler: onchangehandler,\n      submitHandler: submitHandler,\n      setinput: setinput,\n      input: input,\n      seteditmode: seteditmode\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 36\n    }, this) : null, /*#__PURE__*/_jsxDEV(Pagination, {\n      onChange: value => setPage(value),\n      pageSize: postPerPage,\n      total: total,\n      current: page,\n      showSizeChanger: true,\n      showQuickJumper: true,\n      onShowSizeChange: onShowSizeChange,\n      itemRender: itemRender\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(TableBody, \"N2U0tAKGRShxsMZ+IFEA10x5gQM=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c = TableBody;\nconst Head = styled.div`\n    display:flex;\n    justify-content:space-between;\n    color:white;\n    margin-bottom:10px;\n    div{\n        text-align:center;\n    }\n`; // const mapStateprops = state =>{\n//     return{\n//         items:state.items\n//     }\n// }\n// ---- same with inside currly brackets\n// const mapDispatchToProps = (dispatch) =>{\n//     return {\n//         Fetchdata: (item) => dispatch(Fetchdata(item))\n//     }\n// }\n\n_c2 = Head;\nexport default connect()(TableBody);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TableBody\");\n$RefreshReg$(_c2, \"Head\");","map":{"version":3,"sources":["/Users/admin/Desktop/React/website-monitoring/src/components/Main/Table/Tablebody.js"],"names":["useState","useEffect","styled","Form","Pagination","useDispatch","useSelector","additemInitiate","getitemsInitiate","deleteitemInitiate","edititemInitiate","updateitemInitiate","deleteitemAllInitiate","copyitemInitiate","editedmodeinitialzer","addlogInitiate","actionlogInitiate","editlogInitiate","TableBody","props","website","searchdata","hide","state","data","role","user","total","length","page","setPage","postPerPage","setPostPerPage","indexofLastPage","indexofFirstPage","CurrentPosts","slice","onShowSizeChange","current","pageSize","itemRender","type","orginialElement","websiteid","setwebsiteid","radio","setradio","editmode","seteditmode","dispatch","initialstate","code","domain","cpanel","username","password","owner","domainExpireDate","hostingExpireDate","sslExpireDate","input","setinput","datas","mail","userid","uid","actiontype","time","Date","onchangehandler","event","target","id","value","submitHandler","e","preventDefault","editlogdata","newowner","oldowner","newcode","oldcode","newdomain","olddomain","newcpanel","oldcpanel","newdomainExpireDate","olddomainExpireDate","newhostingExpireDate","oldhostingExpireDate","newsslExpireDate","oldsslExpireDate","omainExpireDate","deletehandler","item","window","confirm","edithandler","copyhandler","copieditemdata","deleteallhandler","deleteall","askpermision","alert","map","width","Head","div","connect"],"mappings":"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","sourcesContent":["import {useState,useEffect} from 'react';\nimport styled from 'styled-components';\nimport Form from '../UserForm/Form'\nimport { Pagination } from 'antd'\nimport { useDispatch , useSelector } from 'react-redux'\nimport { additemInitiate, getitemsInitiate, deleteitemInitiate, edititemInitiate,updateitemInitiate,deleteitemAllInitiate, copyitemInitiate,editedmodeinitialzer} from '../../../Actions/action';\nimport { addlogInitiate, actionlogInitiate, editlogInitiate } from '../../../Actions/logging';\n\n\nconst TableBody = (props) =>{\n \n    const {website,searchdata,hide} = useSelector(state=>state.data)\n    const {role} = useSelector(state => state.user) \n    // pagination\n    const total = searchdata.length\n    const [page,setPage] = useState(1)\n    const [postPerPage,setPostPerPage] = useState(10)\n    const indexofLastPage = page * postPerPage\n    const indexofFirstPage = indexofLastPage - postPerPage\n    const CurrentPosts = searchdata.slice(indexofFirstPage,indexofLastPage)\n\n    const onShowSizeChange = (current, pageSize) => {\n        setPostPerPage(pageSize)\n    }\n    const itemRender = (current , type , orginialElement) =>{\n        if(type === 'prev'){\n            return <a>Previous</a>\n        }\n        if(type === 'next') {\n            return <a>Next</a>\n        }\n        return orginialElement\n    }\n    // end pagination\n\n    const [websiteid, setwebsiteid] = useState(null)\n    const [radio, setradio] = useState([])\n    const [editmode,seteditmode] = useState(false)\n    const dispatch = useDispatch()\n    const initialstate = {\n    code:'',\n    domain: '',\n    cpanel : '',\n    username: '',\n    password : '',\n    owner: '',\n    domainExpireDate:'',\n    hostingExpireDate:'',\n    sslExpireDate:''\n}\n    \n    const [input,setinput] = useState(initialstate)\n    const datas = {\n        user:role && role.mail,\n        userid:role && role.uid,\n        actiontype :'added',\n        code: input.code,\n        time: new Date()\n    }\n    const onchangehandler = (event) =>{\n        setinput({...input,[event.target.id]:event.target.value})\n    }\n    \n    \n    const submitHandler = (e) =>{   \n        e.preventDefault()\n        if(!editmode){\n            dispatch(additemInitiate(input))\n            setinput({code:'',domain: '',cpanel : '',username: '',password : '',owner: '',domainExpireDate:'',hostingExpireDate:'' , \n            sslExpireDate:''})\n            dispatch(addlogInitiate(datas))\n        }else{\n            const editlogdata = {\n                ...(website.owner !== input.owner) && {owner: {newowner:input.owner,oldowner:website.owner}},\n                ...(website.code !== input.code) && {code: {newcode:input.code,oldcode:website.code}},\n                ...(website.domain !== input.domain) && {domain: {newdomain:input.domain,olddomain:website.domain}},\n                ...(website.cpanel !== input.cpanel) && {cpanel: {newcpanel:input.cpanel,oldcpanel:website.cpanel}},\n                ...(website.domainExpireDate !== input.domainExpireDate) && {domainExpireDate:{newdomainExpireDate: input.domainExpireDate,\n                                                                             olddomainExpireDate:website.domainExpireDate}},\n                ...(website.hostingExpireDate !== input.hostingExpireDate) && {hostingExpireDate:{newhostingExpireDate: input.hostingExpireDate,\n                                                                             oldhostingExpireDate:website.hostingExpireDate}},\n                ...(website.sslExpireDate !== input.sslExpireDate) && {sslExpireDate:{newsslExpireDate: input.sslExpireDate,\n                                                                             oldsslExpireDate:website.sslExpireDate}},\n                actiontype:'Edited',\n                user:role && role.mail\n            }\n            dispatch(updateitemInitiate(websiteid,input))\n            dispatch(actionlogInitiate({code:input.code,user:role && role.mail,actiontype:'edited',time:new Date()}))\n            setwebsiteid(null);\n            editedmodeinitialzer(false);\n            setinput({code:'',domain: '',cpanel : '',username: '',password : '',owner: '',omainExpireDate:'',hostingExpireDate:'' , \n            sslExpireDate:''})\n        }\n        \n    }\n    const deletehandler = (item) =>{\n        if(window.confirm('are you sure?')){\n            dispatch(deleteitemInitiate(item.id))\n            dispatch(actionlogInitiate({code:item.code,user:role && role.mail,actiontype:'deleted',time:new Date()}))\n        }\n    }\n    const edithandler = (id) =>{\n        dispatch(edititemInitiate(id))\n        seteditmode(true)\n        setwebsiteid(id)\n    }\n    const copyhandler = (copieditemdata) =>{\n        dispatch(copyitemInitiate(copieditemdata))\n        dispatch(actionlogInitiate({code:copieditemdata.code,user:role && role.mail,actiontype:'copied',time:new Date()}))\n    }\n    \n    const deleteallhandler = (id) => {\n        setradio([...radio,id])\n    }\n    const deleteall = (radio) =>{\n        dispatch(deleteitemAllInitiate(radio))\n    }\n   \n    useEffect(()=>{\n        dispatch(getitemsInitiate())\n    },[])\n\n    useEffect(()=>{\n        if(website){\n            setinput({...website})\n        }\n    },[website])\n\n    const askpermision = () =>{\n        alert(\"You can't do any action, Please ask admin permission\")\n    }\n   \n    return(\n        \n        <>\n        {role &&role.role === 'admin'\n        ? <button onClick={()=>deleteall(radio)}>Del All</button>\n        : <button onClick={()=>askpermision()}>Del All</button>}\n         \n            {\n                \n                CurrentPosts && CurrentPosts.map((item)=>{\n                    return(\n                        <Head key={item.id}>\n                            <input type=\"radio\" value=\"\" name=\"\" onClick={()=>deleteallhandler(item.id)} />\n                            <div style={{width:'7.5%'}}>{item.code}</div>\n                            <div style={{width:'20%'}}>{item.domain}</div>\n                            <div style={{width:'20%'}}>{item.cpanel}</div>\n                            <div style={{width:'12.5%'}}>{item.username}</div>\n                            <div style={{width:'12.5%'}}>{item.password}</div>\n                            <div style={{width:'10%'}}>{item.owner}</div>\n                            {role && role.role === 'admin' \n                            ?\n                            <>\n                            <button onClick={()=>deletehandler(item)}>Del</button>\n                            <button onClick={()=>copyhandler(item)}>Copy</button>\n                            <button onClick={()=>edithandler(item.id)}>Edit</button>\n                            </>\n                            :\n                            <>\n                            <button onClick={()=>askpermision()}>Del</button>\n                            <button onClick={()=>askpermision()}>Copy</button>\n                            <button onClick={()=>askpermision()}>Edit</button>\n                            </>\n                    }\n                        </Head>\n                    )\n                })\n                \n            }\n            {\n                hide || editmode ? <Form onchangehandler={onchangehandler} submitHandler={submitHandler} setinput={setinput} input={input} seteditmode={seteditmode}/> : null\n            }\n            <Pagination onChange = {(value) => setPage(value)} \n            pageSize={postPerPage} \n            total = {total} \n            current = {page}\n            showSizeChanger\n            showQuickJumper\n            onShowSizeChange={onShowSizeChange}\n            itemRender={itemRender}\n           \n                 />\n        </>\n    )\n}\nconst Head = styled.div`\n    display:flex;\n    justify-content:space-between;\n    color:white;\n    margin-bottom:10px;\n    div{\n        text-align:center;\n    }\n`\n// const mapStateprops = state =>{\n//     return{\n//         items:state.items\n//     }\n    \n// }\n// ---- same with inside currly brackets\n// const mapDispatchToProps = (dispatch) =>{\n//     return {\n//         Fetchdata: (item) => dispatch(Fetchdata(item))\n//     }\n// }\nexport default connect()(TableBody)"]},"metadata":{},"sourceType":"module"}